name: Multiples Job

on:
    push 

jobs: 
    Build:
        runs-on: ubuntu-latest
        steps:
          - name: Install Cowsay
            run: | 
             sudo apt install cowsay -y
             mkdir dist

          - name: Executer Cowsay 
            run: cowsay -f dragon "Run for cover, I'am a DRAGON.." >> dist/dragon.txt

          - name: upload dragon file
            uses: actions/upload-artifact@v6
            with:
                name: dragon-test-file
                path: dist/

          - name: Affichier le contenu
            run: ls -latr


    Test:
        needs: Build # lier les Jobs
        runs-on: ubuntu-latest

        steps:
         - name: telecharger dragon file
           uses: actions/download-artifact@v7
           with:
            name: dragon-test-file
        
         - name: Affichier le contenu
           run: ls -latr

         - name: Test File exists
           run: grep -i "dragon" dragon.txt

    Deploy:
        needs: Test
        runs-on: ubuntu-latest
        steps:
          
         - name: telecharger dragon file
           uses: actions/download-artifact@v7
           with:
            name: dragon-test-file

         - name: Deploy
           run: echo Deploying.......